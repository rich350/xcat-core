=head1 NAME

B<makegocons> - Register or unregister the node in the goconserver service

=head1 SYNOPSIS

B<makegocons> [B<-V|--verbose>] [B<-d|--delete>] [B<-q|--query>] [I<noderange>]

B<makegocons> [B<-V|--verbose>] [B<-C|--cleanup>]

=head1 DESCRIPTION

The B<makegocons> command will start the goconserver service if it is not started, then
send the REST request to create or delete the session resource in the goconserver service. The session
information including the session command or ssh connection parameters (for openbmc) is generated by xcat
based on the records in the related tables (e.g. nodehm, ipmi, ppc, openbmc).

By default B<makegocons> will register the session for all of the nodes in xcat.

If a I<noderange> is specified, only the session in the specified scope will be affected, goconserver
service will not be restarted and the other session will not be disconnected. This is the advantage
of goconserver over the conserver service with B<makeconservercf>.

If B<-d> is specified, B<makegocons> will remove the session in the goconserver service.

In the case of a hierarchical cluster (i.e. one with service nodes) B<makegocons> will determine
which nodes will have their consoles accessed from the management node and which from a service node
(based on the nodehm.conserver attribute).

To start goconserver on the specified service node, setup goconserver package on that service node, then set
the B<console> column of B<servicenode> table to B<2>.

To support diskless service node, a new column B<consoleenabled> has been added in B<nodehm> table, it is used by B<makegocons>
command to save the current console state for the node. After reinstalling the service node, the console storage file which maintain
the console nodes by goconserver is lost, xCAT would register the console nodes into goconserver based on B<consoleenabled> attribute
when restarting xcatd service.

For openbmc which uses ssh as the terminal session connection method, goconserver can help save the system
resources as goconserver could handle the ssh connection within goroutine which is more light-weighted than the command process.

B<Note:> goconserver only support the systemd based systems. It has been integrated with xCAT as a recommended package.


=head1 OPTIONS

=over 10

=item B<-d|--delete>

Delete rather than add or refresh the nodes specified as a noderange.

=item B<-C|--cleanup>

Remove the entries for the nodes whose definitions have been removed from xCAT db.

=item B<-q|--query>

List the console connection of the nodes. If noderange is not specified, all of the console nodes will be displayed.

=item B<-v|--version>

Display version.

=item B<-V|--verbose>

Verbose mode.

=item B<-h|--help>

Display usage message.

=back


=head1 RETURN VALUE

=over 2

=item 0. 
The command completed successfully.

=item 1. 
An error has occurred.

=back

=head1 EXAMPLES

=over 2

=item 1.
To create goconserver configuration for all the nodes.

 makegocons

=item 2.
To create goconserver configuration for nodes node01-node10.

 makegocons node01-node10

=item 3.
To remove goconserver configuration for node01.

 makegocons -d node01

=item 4.
To list console connection for node01.

 makegocons -q node01

=back

=head1 SEE ALSO

L<rcons(1)|rcons.1>

